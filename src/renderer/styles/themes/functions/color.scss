// ======================================================
// 颜色处理函数
// ======================================================
@use 'sass:color';
@use 'sass:list';
@use 'sass:math';

// 将十六进制颜色转换为RGB列表
// @param {Color} $color - 需要转换的颜色
// @return {List} - 包含r, g, b值的列表
@function hex-to-rgb($color) {
  @return (
    color.channel($color, "red", $space: rgb),
    color.channel($color, "green", $space: rgb),
    color.channel($color, "blue", $space: rgb)
  );
}

// 将RGB列表转为以逗号分隔的字符串，用于CSS变量
// @param {List} $rgb - RGB值列表
// @return {String} - 以逗号分隔的RGB字符串
@function rgb-to-string($rgb) {
  @return '#{list.nth($rgb, 1)}, #{list.nth($rgb, 2)}, #{list.nth($rgb, 3)}';
}

// 将颜色转换为RGB字符串形式
// @param {Color} $color - 需要转换的颜色
// @return {String} - 返回rgb(r, g, b)形式的字符串
@function to-rgb-string($color) {
  $rgb: hex-to-rgb($color);

  @return 'rgb(#{list.nth($rgb, 1)}, #{list.nth($rgb, 2)}, #{list.nth($rgb, 3)})';
}

// 将颜色转换为RGBA字符串形式
// @param {Color} $color - 需要转换的颜色
// @param {Number} $alpha - 透明度
// @return {String} - 返回rgba(r, g, b, a)形式的字符串
@function to-rgba-string($color, $alpha: 1) {
  $rgb: hex-to-rgb($color);

  @return 'rgba(#{list.nth($rgb, 1)}, #{list.nth($rgb, 2)}, #{list.nth($rgb, 3)}, #{$alpha})';
}

// 混合两个颜色
// @param {Color} $color1 - 第一个颜色
// @param {Color} $color2 - 第二个颜色
// @param {Number} $weight - 第二个颜色的权重 (0-1)
// @return {Color} - 混合后的颜色
@function color-mix($color1, $color2, $weight: 0.5) {
  @return color.mix($color2, $color1, math.percentage($weight));
}

// 调亮颜色
// @param {Color} $color - 基础颜色
// @param {Number} $amount - 调亮的程度 (0-1)
// @return {Color} - 调亮后的颜色
@function lighten-color($color, $amount: 0.1) {
  @return color.adjust($color, $lightness: math.percentage($amount));
}

// 调暗颜色
// @param {Color} $color - 基础颜色
// @param {Number} $amount - 调暗的程度 (0-1)
// @return {Color} - 调暗后的颜色
@function darken-color($color, $amount: 0.1) {
  @return color.adjust($color, $lightness: math.percentage($amount) * -1);
}

// 调整颜色饱和度
// @param {Color} $color - 基础颜色
// @param {Number} $amount - 调整饱和度的程度 (-1到1)
// @return {Color} - 调整后的颜色
@function adjust-saturation($color, $amount: 0.1) {
  @return color.adjust($color, $saturation: math.percentage($amount));
}

// 创建hover状态的颜色(默认调亮5%)
// @param {Color} $color - 基础颜色
// @return {Color} - hover状态的颜色
@function hover-color($color) {
  @return lighten-color($color, 0.05);
}

// 创建active状态的颜色(默认调暗5%)
// @param {Color} $color - 基础颜色
// @return {Color} - active状态的颜色
@function active-color($color) {
  @return darken-color($color, 0.05);
}

// 创建disabled状态的颜色(默认降低饱和度并增加亮度)
// @param {Color} $color - 基础颜色
// @return {Color} - disabled状态的颜色
@function disabled-color($color) {
  $desaturated: color.adjust($color, $saturation: -30%);

  @return lighten-color($desaturated, 0.2);
}

// 创建背景颜色(默认调亮90%)
// @param {Color} $color - 基础颜色
// @return {Color} - 背景颜色
@function bg-color($color) {
  @return lighten-color($color, 0.9);
}

// 创建边框颜色(默认调亮80%)
// @param {Color} $color - 基础颜色
// @return {Color} - 边框颜色
@function border-color($color) {
  @return lighten-color($color, 0.8);
}

// 创建透明色
// @param {Color} $color - 基础颜色
// @param {Number} $alpha - 透明度 (0-1)
// @return {Color} - 透明色
@function transparent-color($color, $alpha: 0.5) {
  @return color.change($color, $alpha: $alpha);
}

// 创建selected状态的颜色(默认调亮10%)
// @param {Color} $color - 基础颜色
// @return {Color} - selected状态的颜色
@function selected-color($color) {
  @return lighten-color($color, 0.1);
}
