.common-select {
  --select-height: 32px;
  --select-item-height: 36px;
  --select-bg: var(--system-color-bg-primary, #ffffff);
  --select-border: var(--system-color-border-primary, #e0e0e0);
  --select-border-hover: var(--system-color-border-hover, #a0a0a0);
  --select-border-focus: var(--system-color-control-accent, #2196f3);
  --select-text: var(--system-color-text-primary, #333333);
  --select-placeholder: var(--system-color-text-secondary, #999999);
  --select-item-hover: var(--system-color-bg-hover, #f5f5f5);
  --select-item-selected: var(--system-color-bg-selected, #e3f2fd);
  --select-error: var(--system-color-error, #d32f2f);
  --select-radius: 4px;
  --select-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  --select-z-index: 100;
  
  /* Default Size (Medium) */
  --select-height: 32px;
  --select-font-size: 14px;

  position: relative;
  box-sizing: border-box;
  font-family: inherit;
  font-size: var(--select-font-size);
  width: 100%; /* Default to full width of container unless overridden */
}

/* Size Modifiers */
.common-select.is-small {
  --select-height: 24px;
  --select-font-size: 12px;
}

.common-select.is-medium {
  --select-height: 32px;
  --select-font-size: 14px;
}

.common-select.is-large {
  --select-height: 40px;
  --select-font-size: 16px;
}

.common-select__trigger {
  height: var(--select-height);
  background: var(--select-bg);
  border: 1px solid var(--select-border);
  border-radius: var(--select-radius);
  padding: 0 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;
  user-select: none;
}

.common-select__trigger:hover {
  border-color: var(--select-border-hover);
}

.common-select__trigger:focus,
.common-select.is-open .common-select__trigger {
  border-color: var(--select-border-focus);
}

/* Focus ring only on keyboard focus if needed, but let's keep simple border for now */
.common-select__trigger:focus-visible {
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
}

.common-select.is-error .common-select__trigger {
  border-color: var(--select-error);
}

.common-select.is-disabled {
  opacity: 0.6;
  pointer-events: none;
  cursor: not-allowed;
}

.common-select__value {
  color: var(--select-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  margin-right: 8px;
}

.common-select__value.is-placeholder {
  color: var(--select-placeholder);
}

.common-select__arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--select-placeholder);
  transition: transform 0.2s ease;
  transform-origin: center;
}

.common-select.is-open .common-select__arrow {
  transform: rotate(180deg);
}

.common-select__dropdown {
  position: absolute;
  left: 0;
  width: 100%;
  background: var(--select-bg);
  border: 1px solid var(--select-border);
  border-radius: var(--select-radius);
  box-shadow: var(--select-shadow);
  z-index: var(--select-z-index);
  display: none;
  /* Max height handling */
  max-height: calc(var(--select-item-height) * var(--max-display-items, 5));
  overflow-y: auto;
  box-sizing: border-box;
  padding: 4px 0;
}

.common-select.is-open .common-select__dropdown {
  display: block;
}

/* Positioning & Animation */
.common-select__dropdown.is-bottom {
  top: calc(100% + 4px);
  transform-origin: top center;
  animation: commonSelectSlideDown 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.common-select__dropdown.is-top {
  bottom: calc(100% + 4px);
  transform-origin: bottom center;
  animation: commonSelectSlideUp 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.common-select__option {
  height: var(--select-item-height);
  line-height: var(--select-item-height); /* For vertical center */
  padding: 0 12px;
  cursor: pointer;
  color: var(--select-text);
  transition: background 0.1s;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
}

.common-select__option:hover {
  background: var(--select-item-hover);
}

.common-select__option.is-selected {
  background: var(--select-item-selected);
  color: var(--select-border-focus);
  font-weight: 500;
}

.common-select__option.is-disabled {
  color: var(--select-placeholder);
  cursor: not-allowed;
  background: transparent;
}

.common-select__error {
  font-size: 12px;
  color: var(--select-error);
  margin-top: 4px;
  min-height: 16px;
  line-height: 1.4;
}

/* Animations */
@keyframes commonSelectSlideDown {
  from { transform: translateY(-8px) scaleY(0.95); opacity: 0; }
  to { transform: translateY(0) scaleY(1); opacity: 1; }
}

@keyframes commonSelectSlideUp {
  from { transform: translateY(8px) scaleY(0.95); opacity: 0; }
  to { transform: translateY(0) scaleY(1); opacity: 1; }
}

/* Scrollbar */
.common-select__dropdown::-webkit-scrollbar {
  width: 6px;
}
.common-select__dropdown::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 3px;
}
.common-select__dropdown::-webkit-scrollbar-thumb:hover {
  background: #bbb;
}
.common-select__dropdown::-webkit-scrollbar-track {
  background: transparent;
}
