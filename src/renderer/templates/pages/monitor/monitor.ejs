<link rel="stylesheet" href="pages/monitor/monitor.css">

<!-- List View -->
<div id="monitor-list-view">
    <h1><%= t('modules.network_monitor') %></h1>

    <div class="controls" style="margin-bottom: 20px;">
        <button id="analyzeBtn" class="btn btn-primary">
            <i data-feather="activity" style="width: 14px; margin-right: 6px;"></i>
            <%= t('monitor.analyze') %>
        </button>
        <button id="refreshBtn" class="btn">
            <i data-feather="refresh-cw" style="width: 14px; margin-right: 6px;"></i>
            <%= t('monitor.refresh') %>
        </button>
    </div>

    <div id="status" class="status"></div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value" id="processCount">0</div>
            <div class="stat-label"><%= t('monitor.processes') %></div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="connectionCount">0</div>
            <div class="stat-label"><%= t('monitor.connections') %></div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="serverCount">0</div>
            <div class="stat-label"><%= t('monitor.servers') %></div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="memoryUsage">0 MB</div>
            <div class="stat-label"><%= t('monitor.memory') %></div>
        </div>
    </div>

    <h2><%= t('monitor.processes') %></h2>
    <div class="table-container">
        <table id="processTable">
            <thead>
                <tr>
                    <th>PID</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Download</th>
                    <th>Upload</th>
                    <th>Connections</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="7" class="no-data">No data</td></tr>
            </tbody>
        </table>
    </div>

    <h2><%= t('monitor.servers') %></h2>
    <div class="table-container">
        <table id="serverTable">
            <thead>
                <tr>
                    <th>IP Address</th>
                    <th>Ports</th>
                    <th>Count</th>
                    <th>Purpose</th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="4" class="no-data">No data</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Details View -->
<div id="monitor-details-view" style="display: none;">
    <div class="view-header">
        <button id="backToMonitorBtn" class="btn-icon">
            <i data-feather="arrow-left"></i>
        </button>
        <h2>Process Details: <span id="detailProcessName"></span></h2>
    </div>
    
    <div class="details-content">
        <div class="info-card">
            <h3>Basic Info</h3>
            <p><strong>PID:</strong> <span id="detailPid"></span></p>
            <p><strong>Category:</strong> <span id="detailCategory"></span></p>
            <p><strong>Memory:</strong> <span id="detailMemory"></span></p>
            <p><strong>CPU:</strong> <span id="detailCpu"></span>%</p>
        </div>

        <h3>Active Connections</h3>
        <div class="table-container">
            <table id="detailConnectionTable">
                <thead>
                    <tr>
                        <th>Local Address</th>
                        <th>Remote Address</th>
                        <th>State</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<!-- Dropdown Menu Template (Hidden) -->
<div id="actionDropdown" class="dropdown-menu" style="display: none;">
    <div class="dropdown-item" data-action="details">View Details</div>
    <div class="dropdown-item" data-action="limit">Limit Speed</div>
    <div class="dropdown-item" data-action="end">End Process</div>
    <div class="dropdown-item" data-action="locate">Locate File</div>
    <div class="dropdown-item" data-action="properties">Properties</div>
</div>
