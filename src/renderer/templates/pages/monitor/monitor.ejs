<link rel="stylesheet" href="pages/monitor/monitor.css">

<!-- List View -->
<div id="monitor-list-view">
    <h1><%= t('modules.network_monitor') %></h1>

    <div class="controls" style="margin-bottom: 20px;">
        <button id="analyzeBtn" class="btn btn-primary">
            <i data-feather="activity" style="width: 14px; margin-right: 6px;"></i>
            <%= t('monitor.analyze') %>
        </button>
        <button id="refreshBtn" class="btn">
            <i data-feather="refresh-cw" style="width: 14px; margin-right: 6px;"></i>
            <%= t('monitor.refresh') %>
        </button>
    </div>

    <div id="status" class="status"></div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value" id="processCount">0</div>
            <div class="stat-label"><%= t('monitor.processes') %></div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="connectionCount">0</div>
            <div class="stat-label"><%= t('monitor.connections') %></div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="serverCount">0</div>
            <div class="stat-label"><%= t('monitor.servers') %></div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="memoryUsage">0 MB</div>
            <div class="stat-label"><%= t('monitor.memory') %></div>
        </div>
    </div>

    <h2><%= t('monitor.processes') %></h2>
    <div class="table-container">
        <table id="processTable">
            <thead>
                <tr>
                    <th><%= t('table.pid') %></th>
                    <th><%= t('table.name') %></th>
                    <th><%= t('table.category') %></th>
                    <th><%= t('table.download') %></th>
                    <th><%= t('table.upload') %></th>
                    <th><%= t('table.connections') %></th>
                    <th><%= t('table.actions') %></th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="7" class="no-data"><%= t('table.no_data') %></td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Details View -->
<div id="monitor-details-view" style="display: none;">
    <div class="view-header">
        <button id="backToMonitorBtn" class="btn-icon">
            <i data-feather="arrow-left"></i>
        </button>
        <h2><%= t('details.title') %>: <span id="detailProcessName"></span></h2>
    </div>
    
    <div class="details-content">
        <div class="info-card">
            <h3><%= t('details.basic_info') %></h3>
            <p><strong><%= t('table.pid') %>:</strong> <span id="detailPid"></span></p>
            <p><strong><%= t('table.category') %>:</strong> <span id="detailCategory"></span></p>
            <p><strong><%= t('monitor.memory') %>:</strong> <span id="detailMemory"></span></p>
            <p><strong>CPU:</strong> <span id="detailCpu"></span>%</p>
        </div>

        <h3><%= t('details.process_servers') %></h3>
        <div class="table-container">
            <table id="detailServerTable">
                <thead>
                    <tr>
                        <th><%= t('table.ip_address') %></th>
                        <th><%= t('table.ports') %></th>
                        <th><%= t('table.count') %></th>
                        <th><%= t('table.purpose') %></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <h3><%= t('details.active_connections') %></h3>
        <div class="table-container">
            <table id="detailConnectionTable">
                <thead>
                    <tr>
                        <th><%= t('table.local_address') %></th>
                        <th><%= t('table.remote_address') %></th>
                        <th><%= t('table.state') %></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<!-- Dropdown Menu Template (Hidden) -->
<div id="actionDropdown" class="dropdown-menu" style="display: none;">
    <div class="dropdown-item" data-action="details">View Details</div>
    <div class="dropdown-item" data-action="limit">Limit Speed</div>
    <div class="dropdown-item" data-action="end">End Process</div>
    <div class="dropdown-item" data-action="locate">Locate File</div>
    <div class="dropdown-item" data-action="properties">Properties</div>
</div>
