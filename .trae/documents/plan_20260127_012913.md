# 代码审查优化计划

## 🔴 严重问题修复（必须修复）

### 1. 消除重复代码
- 将 `normalizeRules` 函数提取到 `shared/validation/utils.ts` 中统一管理
- 合并 `resetField` 和 `clearValidate` 函数，保留语义更清晰的一个

### 2. 清理死代码
- 删除 `composables/item/use-form-item.ts` 文件
- 从 `index.ts` 中移除相关导出

## 🟡 中等问题修复（建议修复）

### 3. 优化过度简化的 composable
- 评估 `use-form-state.ts` 和 `use-form-config.ts` 的必要性
- 如无实际价值，考虑内联到组件中

### 4. 明确接口职责
- 重构 `FormItemValidateContext` 和 `FormContext`，避免职责重叠
- 添加清晰的注释说明各自用途

### 5. 完善错误处理
- 在 `registerField`、`unregisterField` 中添加警告日志
- 在 `validateField` 中添加字段未找到的警告

## 🟢 轻微问题修复（可选）

### 6. 统一代码风格
- 添加必要的空行，符合"一行代码 + 一行空格"原则
- 统一注释格式为 `/* ... */`
- 添加必要的中文注释

### 7. 清理未使用的导出
- 检查 `types.ts` 中重新导出的类型，移除未使用的

## 预计影响
- 代码行数减少约 50-100 行
- 提高代码可维护性和可读性
- 消除潜在的混淆点