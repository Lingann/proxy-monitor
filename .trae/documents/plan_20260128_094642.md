# Monorepo 迁移计划

## 1. 创建 Monorepo 基础结构
- 创建 `apps/` 和 `packages/` 目录
- 配置 pnpm workspace (`pnpm-workspace.yaml`)
- 配置 nx (`nx.json`)
- 配置 lerna (`lerna.json`)
- 更新根目录 `package.json` 添加 monorepo 相关依赖和脚本

## 2. 创建 UI 组件库包 (`packages/balnc-nova-ui/`)
- 迁移 `src/renderer/components/` 到 `packages/balnc-nova-ui/src/`
- 迁移 `src/renderer/styles/` 到 `packages/balnc-nova-ui/src/styles/`
- 迁移 `src/renderer/utils/` 到 `packages/balnc-nova-ui/src/utils/`
- 迁移 `src/renderer/shared/` 到 `packages/balnc-nova-ui/src/shared/`
- 创建 `packages/balnc-nova-ui/package.json`
- 创建 `packages/balnc-nova-ui/tsconfig.json`
- 创建 `packages/balnc-nova-ui/vite.config.ts` (用于构建组件库)
- 创建 `packages/balnc-nova-ui/index.ts` (导出入口)

## 3. 创建 VitePress 文档应用 (`apps/balnc-nova-ui-docs/`)
- 初始化 VitePress 项目
- 安装 `@gl/vitepress-demo-container-plugin` 和 `@gl/vitepress-demo-container`
- 配置 `.vitepress/config.ts` 使用 demoContainerPlugin
- 配置 `.vitepress/theme/index.ts` 注册 VPDemoContainer 全局组件
- 迁移示例代码到 `apps/balnc-nova-ui-docs/demos/` 目录
- 将所有 bn-xxxx-doc.tsx 转换为 markdown 文件：
  - `bn-form-doc.tsx` → `bn-form.md`
  - `bn-form-item-doc.tsx` → `bn-form-item.md`
  - `bn-input-doc.tsx` → `bn-input.md`
  - `bn-select-doc.tsx` → `bn-select.md`
  - `bn-select-item-doc.tsx` → `bn-select-item.md`
- 使用 `::: vp-demo-container` 语法重写文档
- 创建 `apps/balnc-nova-ui-docs/package.json`

## 4. 创建 Electron 应用 (`apps/proxy-monitor/`)
- 迁移 Electron 主进程代码 (`src/main/`)
- 迁移 Electron 预加载脚本 (`src/preload/`)
- 迁移核心服务 (`src/core/`)
- 迁移应用模块 (`src/modules/`)
- 迁移国际化文件 (`src/locales/`)
- 迁移共享类型 (`src/shared/`)
- 迁移渲染进程代码（不包括 components，因为已移到 UI 库）
- 创建 `apps/proxy-monitor/package.json`（包含原项目的所有依赖）
- 创建 `apps/proxy-monitor/vite.config.ts`
- 创建 `apps/proxy-monitor/tsconfig.json`
- 配置 electron-builder

## 5. 更新导入路径
- 更新 `apps/proxy-monitor` 中的组件导入路径，从 `@/components/` 改为 `@balnc-nova-ui/`
- 更新 `apps/balnc-nova-ui-docs` 中的组件导入路径

## 6. 配置构建和开发脚本
- 根目录添加统一的构建脚本
- 配置 nx 项目和任务
- 配置 lerna 版本管理

## 7. 安装依赖和测试
- 运行 `pnpm install` 安装所有依赖
- 测试 UI 组件库构建
- 测试 VitePress 文档运行
- 测试 Electron 应用运行