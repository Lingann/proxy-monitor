# 重构 Input 组件校验架构

## 目标
将校验逻辑从 form/form-item 解耦，使 Input 组件能够独立进行校验，同时保持与表单系统的兼容性。

## 实施步骤

### 1. 创建共享校验模块 (`src/renderer/shared/validation/`)
- **types.ts**：校验类型定义（ValidationResult, FormTrigger, FormItemRule 等）
- **use-field-validation.ts**：可复用的字段校验 composable
- **zod-adapter.ts**：Zod 适配器（从 bn-form/utils 迁移）

### 2. 重构 Input 组件
- 添加 `rules` prop 支持校验规则
- 添加 `validateState`、`validateMessage` 内部状态
- 使用 `use-field-validation` 实现校验逻辑
- 通过 `expose` 暴露 `validate()`、`clearValidate()`、`showError()` 方法
- 移除 `useFormItem()` 依赖
- 错误样式由 input 自身控制

### 3. 重构 Form-Item 组件
- 使用 `ref` 获取子组件实例
- 调用子组件的 `validate()` 方法进行校验
- 移除 `provide` 校验上下文
- 保留向后兼容的 `provide`（可选）

### 4. 重构 Form 组件
- 调整 `validateField()` 直接调用子组件方法
- 更新字段注册逻辑，支持新的校验接口

### 5. 类型定义更新
- 添加 `ValidatableField` 接口定义可校验字段
- 更新相关类型定义

### 6. 清理和测试
- 删除或标记 `useFormItem` 为废弃
- 确保向后兼容性
- 验证所有校验场景正常工作

## 优势
- ✅ Input 组件可独立校验
- ✅ 降低组件间耦合度
- ✅ 更清晰的调用顺序
- ✅ 校验逻辑可复用
- ✅ 更好的可维护性