# 将 common-select 重构为 bn-select 组件

## 目标

将 `common-select` 组件重构为符合 bn 体系的 `bn-select` 组件，使用 `--bn-*` 主题变量替代 `--system-*` 变量，遵循 vue-code-skill 规范。

## 实施步骤

### 1. 创建 bn-select 目录结构

```
src/renderer/components/bn-select/
├── bn-select.tsx          # 主组件文件
├── props/
│   └── select-props.ts    # Props 定义（使用 createVueProps）
├── types.ts               # 类型定义
├── composables/
│   ├── use-select-state.ts
│   ├── use-select-events.ts
│   ├── use-select-render.ts
│   └── use-select-class.ts
├── styles/
│   ├── variables.scss     # CSS 变量定义（使用 --bn-*）
│   ├── mixins.scss        # 样式混入
│   └── index.scss         # 样式入口
└── index.ts               # 统一导出
```

### 2. Props 重构

* 移除 `config` prop，将配置项直接作为 props

* 使用 `createVueProps` 工厂函数创建 props

* Props 包括：

  * `modelValue`: string | number | null

  * `options`: SelectOption\[]

  * `size`: 'small' | 'medium' | 'large'

  * `placeholder`: string

  * `disabled`: boolean

  * `clearable`: boolean

  * `maxItems`: number

  * `error`: boolean

  * `errorMessage`: string

  * 事件回调：`onUpdateModelValue`, `onChange`, `onFocus`, `onBlur`, `onClear`

### 3. 样式重构

* 使用 `--bn-*` 主题变量（来自 `src/renderer/styles/themes`）

* 变量映射：

  * `--system-color-bg-primary` → `var(--bn-bg-color-base)`

  * `--system-color-border-primary` → `var(--bn-border-color)`

  * `--system-color-text-primary` → `var(--bn-text-color-base)`

  * `--system-color-text-secondary` → `var(--bn-text-color-secondary)`

  * `--system-color-control-accent` → `var(--bn-primary-color-base)`

  * `--system-color-error` → `var(--bn-error-color-base)`

  * `--system-color-bg-hover` → `var(--bn-bg-color-hover)`

  * `--system-color-bg-selected` → `var(--bn-bg-color-selected)`

* 遵循 BEM 命名规范（`bn-select`, `bn-select__trigger`, `bn-select__option`）

* 支持浅色/深色主题适配

### 4. 组件代码规范

* 使用 `defineComponent` 定义组件

* 使用 Props 回调模式（禁止 emits）

* 遵循"一行代码 + 一行空格"的呼吸感排版

* 使用卫语句和提前返回

* 逻辑下沉至 composables

* 使用 `useI18n` 进行国际化

### 5. 组件命名

* 组件名：`BnSelect`

* 文件名：`bn-select.tsx`

* CSS 类名前缀：`bn-select`

* 目录名：`bn-select`

### 6. 删除旧文件

* 删除 `src/renderer/components/common-select/` 目录及其所有文件

## 预期成果

* 完全符合 bn 组件体系规范

* 使用统一的 `--bn-*` 主题变量

* 支持主题切换（浅色/深色）

* 代码风格符合 vue-code-skill 规范

* 保持原有功能不变

